"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.arch = void 0;
const fs_1 = require("fs");
const path = require("node:path");
// https://github.com/feross/arch/blob/master/index.js
const arch = () => {
    if (process.arch === "x64") {
        return "x64";
    }
    if (process.platform === "win32") {
        let useEnv = false;
        try {
            useEnv = !!(process.env.SYSTEMROOT && (0, fs_1.statSync)(process.env.SYSTEMROOT));
        }
        catch (err) {
            return "x86";
        }
        const sysRoot = useEnv && process.env.SYSTEMROOT ? process.env.SYSTEMROOT : "C:\\Windows";
        // If %SystemRoot%\SysNative exists, we are in a WOW64 FS Redirected application.
        let isWOW64 = false;
        try {
            isWOW64 = !!(0, fs_1.statSync)(path.join(sysRoot, "sysnative"));
        }
        catch (err) {
            return "x86";
        }
        return isWOW64 ? "x64" : "x86";
    }
    return "x86";
};
exports.arch = arch;
